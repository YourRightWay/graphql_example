import Express from 'express';import morgan from 'morgan';import expressGraphQL from 'express-graphql';import { graphqlMiddlewareWrapper, errorHandler } from './middlewares';import serverConfig from './config';import schema from './schema';// webpackimport webpack from 'webpack';import config from '../webpack.config.dev';import webpackDevMiddleware from 'webpack-dev-middleware';import webpackHotMiddleware from 'webpack-hot-middleware';const app = new Express();if (process.env.NODE_ENV === 'development') {  const compiler = webpack(config);  app.use(webpackDevMiddleware(compiler, { noInfo: true, publicPath: config.output.publicPath }));  app.use(webpackHotMiddleware(compiler));  app.use(morgan('common'));}function loggingMiddleware(req, res, next) {  console.log('ip:', req.ip);  next();}app.use('/graphql',  graphqlMiddlewareWrapper(    expressGraphQL({      schema,      graphiql: true    })  ),  (req, res, next) => {    console.log('GraphQL SUCCESS');    next();  },  loggingMiddleware,  (req, res, next) => {    console.log('GraphQL END!');    res.graphqlResponse(next);  });app.use(errorHandler);app.listen(serverConfig.port, (err) => {  if (err) throw err;  console.log(`Delivery soft is running on port: ${serverConfig.port}!`);});export default app;